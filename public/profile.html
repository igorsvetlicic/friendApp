<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>My profile</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <nav>
      <span><a href="/">Home</a></span>
      <span><a href="register.html">Register</a></span>
      <span><a href="profile.html">Profile</a></span>
    </nav>
    <h1 style="text-align: center;">Welcome!</h1>
    <div ng-app = "getUser" ng-controller="userCtrl">
      <div class="container">
        <label for="my_name">My name is:</label>
        <input type="text" name="my_name" ng-model = "contact.name"/>
        <button class="btn btn-warning" ng-click="show(contact.name, contact.date)">View my profile</button>
        <table class="table">
          <thead>
            <tr>
              <th>Name:</th>
              <th>Date:</th>
              <th>Photo:</th>
              <th>Users in my friend list (Click to see profile):</th>
              <th>Friend Requests</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="contact in name">
              <td>{{contact.name}}</td>
              <td>{{contact.date}}</td>
              <td><img src="/images/{{contact.photo}}"/></td>
              <td>
                <div>
                  <p ng-repeat="x in contact.friendListName" ng-click="viewFriendProfile(x)" style="color: green; padding: 10px; border: 1px solid green;">{{x}}</p>
                </div>
              </td>
              <td><strong>{{contact.pendingFriendReqName}}</strong> <mybtn></mybtn></td>
            </tr>
          </tbody>
        </table>
        <div id="currentProfile">
          <h1>Profile of: {{friend[0].name}}</h1>
          <table class="table">
            <thead>
              <tr>
                <th>Name:</th>
                <th>Date:</th>
                <th>Photo:</th>
                <th>Users in my friend list (Click to see profile!):</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="fr in friend">
                <td>{{fr.name}}</td>
                <td>{{fr.date}}</td>
                <td><img src="/images/{{fr.photo}}"/></td>
                <td>
                  <div>
                    <p ng-repeat="x in fr.friendListName" ng-click="viewFriendProfile(x)" style="color: green; padding: 10px; border: 1px solid green;">{{x}}</p>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <hr>
        <br>
      </div>


      <div ng-controller="noviControler">
        <div class="container">
          <button class="btn btn-warning" ng-click="findDate()">Find people with same date of birth</button>
          <table class="table">
            <thead>
              <tr>
                <th>Name:</th>
                <th>Date:</th>
                <th>Photo:</th>
                <th>Users in my friend list:</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="user in users">
                <td>{{user.name}}</td>
                <td>{{user.date}}</td>
                <td><img src="/images/{{user.photo}}"/></td>
                <td>{{user.listData}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="container">
      <a ng-click="showing = !showing" class="btn btn-warning" type="button">Show all registered people</a>
      <div ng-show="showing">
        <br><h4>List of all registered users!</h4><br>
        <table class="table">
          <thead>
            <tr>
              <th>Name:</th>
              <th>Date of birth:</th>
              <th>Photo:</th>
              <th>List of friends:</th>
              <th>&nbsp;</th>
              <th>&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="t in contactlist">
              <td>{{t.name}}</td>
              <td>{{t.date}}</td>
              <td>{{t.photo}}</td>
              <td>{{t.friendListName}}</td>
              <td><button class="btn btn-danger" ng-click = "remove(t._id)">Remove contact</button></td>
              <td>&nsbp;</td>
              <td><button class="btn btn-success" ng-click="sendFriend(t._id, contact.name, t.name)">Send F Request</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.10/angular.min.js"></script>
    <script src="controllers/controller.js"></script>
  </body>
</html>
